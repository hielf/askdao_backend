<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
        <title>视频搜索结果</title>
        <!-- 引入 WeUI -->
        <!-- <link rel="stylesheet" href="path/to/weui/dist/style/weui.min.css"/> -->
        <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
        <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.1.2/css/jquery-weui.min.css">
    </head>
    <body>
      <div class="weui-cells weui-cells_checkbox">
      <% @data.each do |d| %>
      <label class="weui-cell weui-check__label" for="<%= d["id"] %>">
        <div class="weui-cell__hd">
          <input type="checkbox" class="weui-check" name="checkbox1" id="<%= d["id"] %>" value="<%= d["id"] %>">
          <i class="weui-icon-checked"></i>
        </div>
        <div class="weui-cell__bd">
          <p><%= d["name"] %></p></br>
          <p style="color:#999999;font-size: 15px;">作者:<%= d["author"] %></p>
        </div>
      </label>
      <% end %>
      <a href="javascript:void(0);" class="weui-cell weui-cell_link">
        <div class="weui-cell__bd">添加更多</div>
      </a>
      </div>

      <script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
      <script src="https://cdn.bootcss.com/jquery-weui/1.1.2/js/jquery-weui.min.js"></script>
      <script>
      $('.weui-cell weui-cell_link').click(function(){
      var allVals = [];
        $('input:checkbox:checked').each(function() {
             allVals.push(parseInt($(this).val()));
           });

          $.ajax
          ({
              url: 'http://wendao.easybird.cn/results/submit_download',
              data: {"ids": allVals},
              type: 'post',
              success: function(result)
              {
                  $('.modal-box').text(result).fadeIn(700, function()
                  {
                      setTimeout(function()
                      {
                          $('.modal-box').fadeOut();
                      }, 2000);
                  });
              }
          });
      });
      </script>
    </body>
</html>
